# Medusa Frontend - Docker –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è

## üìã –û–±–∑–æ—Ä

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –¥–µ–ø–ª–æ—è –Ω–∞ VPS —á–µ—Ä–µ–∑ GitHub.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ë–µ–∑ Nginx (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏–ª–∏ –±–µ–∑ –¥–æ–º–µ–Ω–∞)

```bash
# –ó–∞–ø—É—Å–∫ –≤ Docker
docker compose up -d

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker compose logs -f

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker compose down
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –° Nginx –≤ Docker (–¥–ª—è production —Å –¥–æ–º–µ–Ω–æ–º)

```bash
# –ó–∞–ø—É—Å–∫ —Å Nginx (—Ç—Ä–µ–±—É–µ—Ç—Å—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã)
docker compose -f docker-compose-nginx.yml up -d

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker compose -f docker-compose-nginx.yml logs -f

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker compose -f docker-compose-nginx.yml down
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –î–ª—è production —Å –¥–æ–º–µ–Ω–æ–º —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Nginx –Ω–∞ —Ö–æ—Å—Ç–µ (—Å–º. [`NGINX_SETUP.md`](NGINX_SETUP.md)).

### –î–µ–ø–ª–æ–π –Ω–∞ VPS

```bash
# –ù–∞ VPS (–±–µ–∑ Nginx)
./deploy.sh

# –ù–∞ VPS (—Å Nginx –≤ Docker)
docker compose -f docker-compose-nginx.yml up -d
```

–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≤ [`DEPLOYMENT.md`](DEPLOYMENT.md).

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
medusa-storefront/
‚îú‚îÄ‚îÄ Dockerfile                    # Multi-stage Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ .dockerignore                 # –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è Docker
‚îú‚îÄ‚îÄ docker-compose.yml            # Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ .env.production              # Production –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ deploy.sh                     # –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è
‚îú‚îÄ‚îÄ DEPLOYMENT.md                 # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é –Ω–∞ VPS
‚îú‚îÄ‚îÄ DOCKER.md                     # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ Docker
‚îî‚îÄ‚îÄ DOCKER_README.md              # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ `.env.production` –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env.template`:

```env
# Backend URL
MEDUSA_BACKEND_URL=http://88.218.67.164:9000

# Frontend URL
NEXT_PUBLIC_BASE_URL=http://88.218.67.164:8000

# Publishable API –∫–ª—é—á
NEXT_PUBLIC_MEDUSA_PUBLISHABLE_KEY=–≤–∞—à-–∫–ª—é—á

# –†–µ–≥–∏–æ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
NEXT_PUBLIC_DEFAULT_REGION=eu

# –°–µ–∫—Ä–µ—Ç –¥–ª—è revalidation (–∏–∑–º–µ–Ω–∏—Ç–µ –Ω–∞ —Å–ª—É—á–∞–π–Ω—É—é —Å—Ç—Ä–æ–∫—É!)
REVALIDATE_SECRET=–≤–∞—à-—Å–ª—É—á–∞–π–Ω—ã–π-—Å–µ–∫—Ä–µ—Ç
```

**–í–∞–∂–Ω–æ**: –§–∞–π–ª `.env.production` –Ω–µ –¥–æ–ª–∂–µ–Ω –∫–æ–º–º–∏—Ç–∏—Ç—å—Å—è –≤ Git!

## üê≥ Docker –ö–æ–º–∞–Ω–¥—ã

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏

```bash
# –ó–∞–ø—É—Å–∫
docker compose up -d

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker compose down

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker compose restart

# –°—Ç–∞—Ç—É—Å
docker compose ps
```

### –õ–æ–≥–∏

```bash
# –í—Å–µ –ª–æ–≥–∏
docker compose logs

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker compose logs -f

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫
docker compose logs --tail=50
```

### –°–±–æ—Ä–∫–∞

```bash
# –°–±–æ—Ä–∫–∞ —Å –∫—ç—à–µ–º
docker compose build

# –°–±–æ—Ä–∫–∞ –±–µ–∑ –∫—ç—à–∞
docker compose build --no-cache
```

## üì¶ Multi-stage Build

Dockerfile –∏—Å–ø–æ–ª—å–∑—É–µ—Ç multi-stage build –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

1. **Dependencies** - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
2. **Builder** - –°–±–æ—Ä–∫–∞ Next.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
3. **Runner** - Production runtime

–≠—Ç–æ –º–∏–Ω–∏–º–∏–∑–∏—Ä—É–µ—Ç —Ä–∞–∑–º–µ—Ä —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ–±—Ä–∞–∑–∞ –∏ —É–ª—É—á—à–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å.

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ—Ç –∏–º–µ–Ω–∏ –Ω–µ-root –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `.env.production`
- Health check –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- –õ–æ–≥–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã –ø–æ —Ä–∞–∑–º–µ—Ä—É (10MB, 3 —Ñ–∞–π–ª–∞)

## üåê –°–µ—Ç—å

Frontend –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —Å–µ—Ç–∏ `medusa_network` –¥–ª—è —Å–≤—è–∑–∏ —Å backend.

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ç—å —Å–æ–∑–¥–∞–Ω–∞:

```bash
docker network create medusa_network
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```bash
# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker stats medusa_frontend

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞
docker system df

# Health status
docker inspect medusa_frontend | grep -A 10 Health
```

## üö® Troubleshooting

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker-compose logs

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ .env.production
ls -la .env.production

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
docker-compose config
```

### –û—à–∏–±–∫–∏ —Å–±–æ—Ä–∫–∏

```bash
# –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à
docker system prune -a

# –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –±–µ–∑ –∫—ç—à–∞
docker-compose build --no-cache
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç—å
docker network inspect medusa_network

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ backend
docker-compose exec frontend ping medusa_backend
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [`DEPLOYMENT.md`](DEPLOYMENT.md) - –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é –Ω–∞ VPS
- [`DOCKER.md`](DOCKER.md) - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ Docker
- [`README.md`](README.md) - –û–±—â–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Docker Documentation](https://docs.docker.com/)
- [Docker Compose Documentation](https://docs.docker.com/compose/)
- [Next.js Deployment](https://nextjs.org/docs/deployment)
- [Medusa Documentation](https://docs.medusajs.com/)

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

1. **CORS**: Backend –¥–æ–ª–∂–µ–Ω —Ä–∞–∑—Ä–µ—à–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã —Å frontend URL. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –≤ `medusa-store/.env`.
2. **Health Check**: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç HTTP –æ—Ç–≤–µ—Ç –Ω–∞ `http://localhost:8000`.
3. **–õ–æ–≥–∏**: –õ–æ–≥–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ Docker –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã –ø–æ —Ä–∞–∑–º–µ—Ä—É.
4. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –ü—Ä–∏ –¥–µ–ø–ª–æ–µ —Å—Ç–∞—Ä—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è.

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ë–∞–∑–æ–≤—ã–π –¥–µ–ø–ª–æ–π (–±–µ–∑ –¥–æ–º–µ–Ω–∞)

1. –°–æ–∑–¥–∞–π—Ç–µ `.env.production` –Ω–∞ VPS
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `./deploy.sh` –Ω–∞ VPS
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø–æ –∞–¥—Ä–µ—Å—É `http://88.218.67.164:8000`

### Production –¥–µ–ø–ª–æ–π (—Å –¥–æ–º–µ–Ω–æ–º –∏ HTTPS)

1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞**
   - –ö—É–ø–∏—Ç–µ –¥–æ–º–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, example.com)
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ DNS A –∑–∞–ø–∏—Å—å –Ω–∞ IP: `88.218.67.164`
   - –ü–æ–¥–æ–∂–¥–∏—Ç–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è DNS (–æ–±—ã—á–Ω–æ 1-24 —á–∞—Å–∞)

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx –∏ SSL**
   - –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ [`NGINX_SETUP.md`](NGINX_SETUP.md)
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Nginx –∏ Certbot
   - –ü–æ–ª—É—á–∏—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (Let's Encrypt)
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ reverse proxy

3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è**
   - –ò–∑–º–µ–Ω–∏—Ç–µ `NEXT_PUBLIC_BASE_URL` –Ω–∞ `https://example.com`
   - –ò–∑–º–µ–Ω–∏—Ç–µ `MEDUSA_BACKEND_URL` –Ω–∞ `https://example.com/api`
   - –û–±–Ω–æ–≤–∏—Ç–µ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ backend

4. **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤**
   - –ó–∞–ø—É—Å—Ç–∏—Ç–µ `./deploy.sh` –Ω–∞ VPS

5. **–ü—Ä–æ–≤–µ—Ä–∫–∞**
   - –û—Ç–∫—Ä–æ–π—Ç–µ `https://example.com` - Frontend
   - –û—Ç–∫—Ä–æ–π—Ç–µ `https://example.com/admin` - Admin –ø–∞–Ω–µ–ª—å
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ HTTPS —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç

–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≤ [`NGINX_SETUP.md`](NGINX_SETUP.md).

## üí¨ –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker-compose logs`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å: `docker-compose ps`
3. –û–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å [`DEPLOYMENT.md`](DEPLOYMENT.md) - —Ä–∞–∑–¥–µ–ª Troubleshooting
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Medusa –∏ Next.js
